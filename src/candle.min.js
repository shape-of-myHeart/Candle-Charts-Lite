'use strict';var _typeof='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(k){return typeof k}:function(k){return k&&'function'==typeof Symbol&&k.constructor===Symbol&&k!==Symbol.prototype?'symbol':typeof k};function _classCallCheck(k,m){if(!(k instanceof m))throw new TypeError('Cannot call a class as a function')}var Chart=function(){var k={globalStyle:{backgroundColor:'rgb(245, 250, 254)',fontFamily:'\uB9D1\uC740\uACE0\uB515',labelColor:'#5d5d5d',yLabelShow:!0,yLabelAlign:'right',yLabelWidth:100,yAxisShow:!0,yAxisColor:'#999',xLabelShow:!0,xLabelAlign:'bottom',xLabelHeight:30,xAxisShow:!0,xAxisColor:'#999',xSplitAxisColor:'rgb(210, 215, 219)',xSplitAxisDotted:!1,ySplitAxisColor:'rgb(210, 215, 219)',ySplitAxisDotted:[1,2],tooltipTextColor:'#333',tooltipBackgroundColor:'transparent',tooltipXAlign:'left',tooltipYAlign:'top',tooltipMinWidth:100,tooltipFontSize:14,tooltipXMargin:5,tooltipYMargin:5,tooltipXPadding:20,tooltipYPadding:5,tooltipCandleThick:5,tooltipLetterSpace:10,focusXAxisColor:'rgba(105, 100, 104, 0.1)',focusXBackgroundColor:'#555',focusXLabelColor:'#fff',focusXAxisExtend:!0,focusYAxisColor:'#888',focusYBackgroundColor:'#555',focusYLabelColor:'#fff',minSpan:8},layerType:'candle',layerStyle:{candle:{incrementItemColor:'rgb(252,4,4)',decrementItemColor:'rgb(0,168,0)'},line:{itemColor:'#000000'},stick:{itemColor:'#000000'}},grid:{top:0,right:0,bottom:0,left:0},padding:{top:30,right:0,bottom:30,left:0},dateFormatter:'MM-dd HH:mm'},m={white:{globalStyle:{},layerStyle:{candle:{},line:{}}},dark:{globalStyle:{backgroundColor:'#151515',labelColor:'#aaa',xSplitAxisColor:'#333',ySplitAxisColor:'#333',tooltipTextColor:'#fff',focusXAxisColor:'rgba(0, 175, 255, 0.2)',focusXBackgroundColor:'rgb(10,98,138)',focusYBackgroundColor:'#333',tooltipBackgroundColor:'rgba(0,0,0,0.5)'},layerStyle:{candle:{incrementItemColor:'#14b143',decrementItemColor:'#ef232a'},line:{itemColor:'#999'},stick:{itemColor:'#999'}}}},o={candle:function candle(_ref,_ref2){var K=_ref.ctx,L=_ref.itemWidth,M=_ref.transform,N=_ref.decrementItemColor,O=_ref.incrementItemColor,P=_ref2.open,Q=_ref2.close,R=_ref2.high,S=_ref2.low,T=M(Math.max(P,Q)),U=M(Math.min(P,Q))-T,V=M(R),W=M(S);return K.strokeStyle=Q>P?O:N,K.fillStyle=Q>P?O:N,6>=L?(K.beginPath(),K.moveTo(B(0.5*L),B(V)),K.lineTo(B(0.5*L),B(W)),K.closePath(),void K.stroke()):void(K.beginPath(),K.moveTo(B(0.5*L),B(V)),K.lineTo(B(0.5*L),B(T)),K.closePath(),K.stroke(),K.beginPath(),K.moveTo(B(0.5*L),B(T+U)),K.lineTo(B(0.5*L),B(W)),K.closePath(),K.stroke(),K.fillRect(2,B(T),B(L-4),B(U)),K.strokeRect(2,B(T),B(L-4),B(U)))},line:function line(_ref3,O){var K=_ref3.ctx,L=_ref3.itemWidth,M=_ref3.transform,N=_ref3.itemColor;if(null!==O){var P=M(O);K.fillStyle=N,K.strokeStyle=N,K.lineTo(B(0.5*L),P)}},stick:function stick(_ref4,O){var K=_ref4.ctx,L=_ref4.itemWidth,M=_ref4.transform,N=_ref4.itemColor;if(null!==O){var P=M(O),Q=1;3>=B(L)?(K.strokeStyle=N,K.beginPath(),K.moveTo(B(0.5*L),B(P)),K.lineTo(B(0.5*L),0),K.closePath(),K.stroke()):(K.fillStyle=N,K.fillRect(B(Q),B(P),B(L-2*Q),B(-P)))}}},p={candle:function candle(_ref5){var K=_ref5.title,L=_ref5.data,_ref5$formatter=_ref5.formatter,M=void 0===_ref5$formatter?z:_ref5$formatter;return null===L||void 0===L?null:[(K.open||'Open')+' '+M(L.open),(K.close||'Close')+' '+M(L.close),(K.low||'Low')+' '+M(L.low),(K.high||'High')+' '+M(L.high)]},line:function line(_ref6){var K=_ref6.title,L=_ref6.data,_ref6$formatter=_ref6.formatter,M=void 0===_ref6$formatter?z:_ref6$formatter;return null===L||void 0===L?null:K+' '+M(L)},stick:function stick(_ref7){var K=_ref7.title,L=_ref7.data,_ref7$formatter=_ref7.formatter,M=void 0===_ref7$formatter?z:_ref7$formatter;return null===L||void 0===L?null:K+' '+M(L)}},q={candle:function candle(K){return K.low},line:function line(K){return K},stick:function stick(K){return K}},u={candle:function candle(K){return K.high},line:function line(K){return K},stick:function stick(K){return K}},z=function(K){return K},A=function(K,L,M,N,O){return(K-L)/(M-L)*(O-N)+N},B=Math.floor,C=function(K,L){for(var M in('object'!==('undefined'==typeof K?'undefined':_typeof(K))||null===K)&&(K={}),L)void 0===K[M]&&(K[M]=L[M]);return K},D=function(K,L){var M;return L.replace(/(yyyy|yy|MM|dd|hh|mm|ss)/gi,function(N){return'yyyy'===N?K.getFullYear():'yy'===N?E(K.getFullYear()%1e3,2):'MM'===N?E(K.getMonth()+1,2):'dd'===N?E(K.getDate(),2):'HH'===N?E(K.getHours(),2):'hh'===N?E((M=K.getHours()%12)?M:12,2):'mm'===N?E(K.getMinutes(),2):'ss'===N?E(K.getSeconds(),2):N})},E=function(K,L){if('number'==typeof K&&(K=K.toString()),'string'==typeof K){for(var N=0;N++<L-K.length;){}return M+K}},F=[],G={},H=function(K,L,M){G[K]||(G[K]=[]),G[K][L]=M,'$On'!==L&&G[K].$On&&G[K].$On(L)},I=function(K,L){return G[K][L]},J=function K(L){var ja=this;_classCallCheck(this,K);var M=document.getElementById(L);if(null!==M){for(var N;-1!==F.indexOf(N=Math.random()+Math.random()+Math.random()););var O,P={};M.style.position='relative';var $,_,Q=[],R=function(){var Qa=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,Ra=document.createElement('canvas'),Sa=Ra.getContext('2d');return Ra.style.position='absolute',Ra.style.top=0,Ra.style.left=0,Ra.style.zIndex=Qa,Ra.width=M.clientWidth,Ra.height=M.clientHeight,M.appendChild(Ra),Sa.translate(0.5,0.5),Q.push(Ra),{canvas:Ra,context:Sa}},S={},T=[],U=[],V=[],W=C(null,k.grid),X=C(null,k.padding),Y=C(null,k.globalStyle),Z=k.dateFormatter,aa=R().context,ba=R().context,ca=R(1).context,da=R(2).context,ea=function(Qa,_ref8){var Ra=_ref8.type,Sa=_ref8.data,Ta=_ref8.style;if(void 0===S[Qa]){var Ua=R();Ua.type=Ra||k.layerType,Ua.data=Sa||[],Ua.style=C(Ta,P[Ua.type]),S[Qa]=Ua,va()}},fa=function(Qa,_ref9){var Ra=_ref9.type,Sa=_ref9.data,Ta=_ref9.style,Ua=S[Qa],Va=void 0!==Ra&&Ra!==Ua.type?P[Ra]:Ua.style;Ua.type=Ra||Ua.type,Ua.data=Sa||Ua.data,Ua.style=C(Ta,Va),va(),Ga()},ga=function(Qa,Ra){var Sa=[];for(var Ta in S){var Ua=Qa(S[Ta],Ta);Ra?Sa[Ra(Ta)]=Ua:Sa.push(Ua)}return Sa},ha=function(Qa,Ra){if(!(0>Qa||0>Ra||T[0]===Qa&&T[1]===Ra)){var Sa=Math.max(Qa,Ra),Ta=Math.min(Qa,Ra);Sa-Ta<Y.minSpan&&(Ta=Sa-Y.minSpan),T[0]=Ta,T[1]=Sa,va()}},ia=function(Qa,Ra){0>Qa||0>Ra||T[0]===Qa&&T[1]===Ra||(!0===Pa()?G[N].dispatchSetViewport(Qa,Ra):G[ja.$rootConnect].dispatchSetViewport(Qa,Ra),ha(Qa,Ra))},ka=function(){return[T[0],T[1]]},la=function(Qa){U=[];for(var Ra=0,Sa=Qa.length;Ra<Sa;Ra++)U.push(new Date(Qa[Ra]));V=U,va(),!0===Pa()&&G[N].dispatchSetTimeline()},ma=function(Qa){Z=Qa,sa()},na=function(Qa){for(var Ra in X=C(Qa,X),S){var Sa=S[Ra];ua(Sa)}},oa=function(Qa){Y=C(Qa,Y),pa(),va()},pa=function(){var Qa=!1===Y.xLabelShow?0:1,Ra=!1===Y.yLabelShow?0:1;W.top='top'===Y.xLabelAlign?Y.xLabelHeight*Qa:0,W.bottom='bottom'===Y.xLabelAlign?Y.xLabelHeight*Qa:0,W.left='left'===Y.yLabelAlign?Y.yLabelWidth*Ra:0,W.right='right'===Y.yLabelAlign?Y.yLabelWidth*Ra:0},qa=function(){return{tWidth:M.clientWidth-W.right-W.left,tHeight:M.clientHeight-W.bottom-W.top}},ra=function(){for(var Qa=ga(function(Ua){for(var Va=Ua.data,Wa=Ua.type,Xa=q[Wa],Ya=u[Wa],Za=Infinity,$a=-Infinity,_a=T[0],ab=T[1];_a<ab;_a++)if(null!==Va[_a]&&void 0!==Va[_a]){var bb=Xa(Va[_a]),cb=Ya(Va[_a]);Za>bb&&(Za=bb),$a<cb&&($a=cb)}return{min:Za,max:$a}}),Ra=Infinity,Sa=-Infinity,Ta=0;Ta<Qa.length;Ta++)Qa[Ta].min<Ra&&(Ra=Qa[Ta].min),Qa[Ta].max>Sa&&(Sa=Qa[Ta].max);$=Ra,_=Sa},sa=function(){var _globalStyle=Y,Qa=_globalStyle.xLabelHeight,Ra=_globalStyle.xLabelAlign,Sa=_globalStyle.xLabelShow,Ta=_globalStyle.xAxisShow;if(0!==V.length){var Wa=M.clientWidth,Xa=M.clientHeight,_getTransformSize=qa(),Ua=_getTransformSize.tWidth,Va=_getTransformSize.tHeight,Ya=Ua/(T[1]-T[0]);ba.save(),ba.clearRect(-10,-10,Wa+10,Xa+10),ba.translate(W.left,0),ba.textBaseline='middle',ba.textAlign='left'===Y.yLabelAlign?'right':'left',ba.font='12px '+Y.fontFamily;var Za=Va,$a='top'===Ra?Qa/2:Xa-Qa/2,_a='bottom'===Ra?Za:W.top;!1!==Sa&&(ba.strokeStyle=Y.xAxisColor,ba.beginPath(),ba.moveTo(0,_a),ba.lineTo(Ua,_a),ba.closePath(),ba.stroke()),ba.fillStyle=Y.labelColor;for(var ab=T[0],bb=T[1],cb=B((T[1]-T[0])/5);ab<bb;ab++){if(-1==T[0]-bb||0==(bb-ab)%cb){var db=B(0.5*Ya);!1!==Ta&&(Array.isArray(Y.xSplitAxisDotted)&&ba.setLineDash(Y.xSplitAxisDotted),ba.strokeStyle=Y.xSplitAxisColor,ba.beginPath(),ba.moveTo(db,W.top),ba.lineTo(db,Za+W.top),ba.closePath(),ba.stroke()),!1!==Sa&&(ba.strokeStyle=Y.xAxisColor,ba.beginPath(),ba.moveTo(db,_a+('bottom'===Ra?5:-5)),ba.lineTo(db,_a),ba.closePath(),ba.stroke(),ba.fillText(D(V[ab],Z),B(db),B($a)))}ba.translate(Ya,0)}ba.restore()}},ta=function(){var _globalStyle2=Y,Qa=_globalStyle2.yLabelWidth,Ra=_globalStyle2.yLabelAlign,Sa=_globalStyle2.yLabelShow,Ta=_globalStyle2.yAxisShow,Wa=M.clientWidth,Xa=M.clientHeight,_getTransformSize2=qa(),Ua=_getTransformSize2.tWidth,Va=_getTransformSize2.tHeight;aa.save(),aa.clearRect(-10,-10,Wa+10,Xa+10),aa.translate(0,Va+W.top),aa.textBaseline='middle',aa.textAlign='left'===Ra?'right':'left',aa.font='12px '+Y.fontFamily;var Ya=B('left'===Ra?Qa:Wa-Qa);aa.strokeStyle=Y.yAxisColor,aa.fillStyle=Y.labelColor,!1!==Sa&&(aa.beginPath(),aa.moveTo(Ya,0),aa.lineTo(Ya,-Va),aa.closePath(),aa.stroke());for(var $a=(_-$)/2,_a=1;$a>10*_a;)_a*=10;$a-=$a%_a,$a=B($a);for(var cb,ab=B($-$%$a),bb=0;bb<=Za+10&&(cb=ab+$a*bb,!(cb>_));bb++)if(!(cb<$)){var db=-A(cb,$,_,0,Va);!1!==Sa&&(aa.fillText(cb.toString(),Ya+('right'===Ra?10:-10),db),aa.strokeStyle=Y.labelColor,aa.beginPath(),aa.moveTo(Ya,db),aa.lineTo(Ya+('right'===Ra?5:-5),db),aa.closePath(),aa.stroke()),!1!==Ta&&(Array.isArray(Y.ySplitAxisDotted)&&aa.setLineDash(Y.ySplitAxisDotted),aa.strokeStyle=Y.ySplitAxisColor,aa.beginPath(),aa.moveTo(W.left,db),aa.lineTo(Ua+W.left-1,db),aa.closePath(),aa.stroke())}aa.restore()},ua=function(Qa){var Ra=Qa.data,Sa=Qa.type,Ta=Qa.context,Ua=Qa.canvas,Va=Qa.style,Ya=M.clientWidth,Za=M.clientHeight;if(0!==V.length){(!0===isNaN(T[0])||!0===isNaN(T[1])||void 0===T[0]||void 0===T[1])&&ia(0,V.length);var $a=o[Sa],_getTransformSize3=qa(),Wa=_getTransformSize3.tWidth,Xa=_getTransformSize3.tHeight,_a=Wa/(T[1]-T[0]);Ta.save(),Ta.clearRect(-10,-10,Ya+10,Za+10),Ta.translate(W.left,Xa+W.top),Ta.beginPath();for(var ab=function(fb){return-A(fb,$,_,X.bottom,Xa-X.top)},bb=T[0],cb=T[1],db=B((T[1]-T[0])/5);bb<cb;bb++){if(null!==Ra[bb]&&void 0!==Ra[bb]){var eb='function'==typeof Va.itemColor?Va.itemColor(bb):Va.itemColor;$a({ctx:Ta,itemWidth:_a,transform:ab,incrementItemColor:Va.incrementItemColor,decrementItemColor:Va.decrementItemColor,itemColor:eb},Ra[bb])}Ta.translate(_a,0)}Ta.stroke(),Ta.closePath(),Ta.restore()}},va=function(){for(var Qa in ra(),S){var Ra=S[Qa];ua(Ra)}sa(),ta(),Ga()};M.addEventListener('mousewheel',function(Qa){Qa.preventDefault();var Sa=Qa.deltaY/100*-10,Ta=[T[0]+Sa,T[1]];0>Ta[0]&&(Ta[0]=0,Ta[1]-=Sa),Ta[1]>V.length&&(Ta[1]=V.length),Ta[0]>=Ta[1]&&(Ta[0]=Ta[1]-1),ia(Ta[0],Ta[1]),Aa({x:Qa.layerX,y:Qa.layerY})});var wa=!1,xa=null;M.addEventListener('mousedown',function(Qa){wa=!0,xa=Qa.clientX}),window.addEventListener('mouseup',function(){!0==wa&&(wa=!1,xa=null)}),window.addEventListener('mousemove',function(Qa){var Ra=xa-Qa.clientX;if(!0==wa&&null!==xa&&10<=Math.abs(Ra)){Qa.preventDefault();var Ta=0>Ra?-1:1,Ua=Ta*5,Va=[T[0]+Ua,T[1]+Ua];if(0>Va[0]||Va[1]>V.length)return;ia(Va[0],Va[1]),xa=Qa.clientX}}),M.addEventListener('mousemove',function(Qa){Aa({x:Qa.layerX,y:Qa.layerY})}),M.addEventListener('mouseout',function(){Ca()});var ya,za=function(_ref10){var Qa=_ref10.x,Ra=_ref10.y,Ua=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0,Va=2<arguments.length&&void 0!==arguments[2]&&arguments[2],Wa=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!0,_getTransformSize4=qa(),Sa=_getTransformSize4.tWidth,Ta=_getTransformSize4.tHeight,Xa=A(Ra,W.top,Ta+W.top,$,_),Ya=Sa/(T[1]-T[0]),Za=Math.floor((Qa-W.left)/Ya),$a=T[0]+Za;if(ya!==$a){if(0>$a||$a>=T[1])return void ca.clearRect(-10,-10,M.clientWidth+10,M.clientHeight+10);if(ca.save(),!0===Wa&&ca.clearRect(-10,-10,M.clientWidth+10,M.clientHeight+10),ca.translate(W.left,0),ca.font='12px '+Y.fontFamily,!0===Ua){if(ca.textAlign=Y.xLabelAlign,ca.textBaseline='middle',ca.strokeStyle=ca.fillStyle=Y.focusXAxisColor,!0===Y.focusXAxisExtend)ca.fillRect(Za*Ya,W.top,Ya,Ta);else{var _a=Za*Ya+Ya/2;ca.beginPath(),ca.moveTo(_a,0),ca.lineTo(_a,W.top+Ta),ca.closePath(),ca.stroke()}if(!1!==Y.xLabelShow){var ab=D(V[$a],Z),bb=ca.measureText(ab).width,cb=5;bb+2*cb<Ya&&(cb=(Ya-bb)/2,bb=Ya-2*cb);var eb,fb,db=Za*Ya;'top'===Y.xLabelAlign?(eb=0,fb=W.top):(eb=Ta,fb=W.bottom),'right'===Y.yLabelAlign||(db-=bb+2*cb-Ya),ca.fillStyle=Y.focusXBackgroundColor,ca.fillRect(db,eb,bb+2*cb,fb),ca.fillStyle=Y.focusXLabelColor,ca.fillText(ab,db+cb,eb+fb/2)}}if(!0===Va&&W.top+Ta>=Ra&&W.top<=Ra){ca.textBaseline='middle',ca.strokeStyle=Y.focusYAxisColor,ca.fillStyle=Y.focusYBackgroundColor,ca.beginPath(),ca.moveTo(0,Ra),ca.lineTo(Sa,Ra),ca.closePath(),ca.stroke();var gb,hb,jb,ib=20;'left'===Y.yLabelAlign?(gb=-W.left,hb=W.left,jb=-10,ca.textAlign='right'):(gb=Sa,hb=W.right,jb=Sa+10,ca.textAlign='left'),ca.fillRect(gb,Ra-ib/2,hb,ib),ca.fillStyle=Y.focusYLabelColor,ca.fillText(B(Xa),jb,Ra)}ca.restore();var kb=ga(function(mb){return'object'===mb.data[$a]?C(null,mb.data[$a]):mb.data[$a]},function(mb){return mb}),lb=new Date(V[$a]);ja.onSelect(lb,kb),Ha($a)}},Aa=function(Qa){if(!0===Pa())G[N].dispatchFocusIndex(Qa);else return G[ja.$rootConnect].dispatchFocusIndex(Qa),void za(Qa,!1,!0,!1);za(Qa,!0,!0)},Ba=function(){ca.clearRect(-10,-10,M.clientWidth+10,M.clientHeight+10)},Ca=function(){if(!0===Pa())G[N].dispatchUnfocusIndex();else return void G[ja.$rootConnect].dispatchUnfocusIndex();Ba()},Da={show:!1,forammters:{},titles:{},filters:[],mainCandle:''},Ea=function(){var Qa=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};Da=C(Qa,Da),Ga()},Fa=null,Ga=function(){return null!==Fa&&Ha(Fa)},Ha=function(){var Qa=function(_ref11){var Ra=_ref11.ctx,Sa=_ref11.texts,Ta=_ref11.lineHeight,_ref11$minWidth=_ref11.minWidth,Ua=void 0===_ref11$minWidth?Y.tooltipMinWidth:_ref11$minWidth,_ref11$notRender=_ref11.notRender,Va=void 0!==_ref11$notRender&&_ref11$notRender,Wa=1,Xa=0,Ya=Y.tooltipLetterSpace,Za=!1,$a=Ua;Sa.forEach(function(db){var eb;eb=!0===Array.isArray(db.text)?Ra.measureText(db.text.join('')).width+(db.text.length-1)*Ya:Ra.measureText(db.text).width,db.width=eb,eb>$a&&($a=eb)});for(var ab,_a=0;_a<Sa.length;_a++){if(ab=Sa[_a],$a<Xa+ab.width&&(!0!==Va&&Ra.translate(0,Ta),Xa=0,Wa++),!0!==Va)if(Ra.fillStyle=ab.color,!0===Array.isArray(ab.text))for(var bb=0,cb=0;cb<ab.text.length;cb++)Ra.fillText(ab.text[cb],bb+cb*Ya,0),bb+=Ra.measureText(ab.text[cb]).width;else Ra.fillText(ab.text,Xa,0);Xa+=ab.width+Ya,Za=!0}return Wa=!1==Za?0:Wa,{lineCount:Wa,height:Wa*Ta,width:$a}};return function(Ra){var _tooltipOptions=Da,Sa=_tooltipOptions.show,Ta=_tooltipOptions.filters,Ua=_tooltipOptions.formatters,Va=_tooltipOptions.titles,Wa=_tooltipOptions.mainCandle;if(da.clearRect(-10,-10,M.clientWidth+20,M.clientHeight+20),!0===Sa){var Za=[],$a=Y.tooltipFontSize;for(var ab in da.font=$a+'px '+Y.fontFamily,da.textBaseline='top',S){if(-1!==Ta.indexOf(ab))return;var bb=S[ab],cb=p[bb.type]({title:Va[ab]||ab,formatter:Ua&&Ua[ab],data:bb.data[Ra]});null===cb||Za.push({text:cb,color:'string'==typeof bb.style.itemColor?bb.style.itemColor:Y.tooltipTextColor})}da.save();var db=function(nb){return Qa({ctx:da,texts:Za,lineHeight:1.2*$a,notRender:nb})},eb=Y.tooltipYPadding,fb=Y.tooltipXPadding,gb=db(!0),hb=gb.height+eb,ib=gb.width+fb,_getTransformSize5=qa(),Xa=_getTransformSize5.tWidth,Ya=_getTransformSize5.tHeight;if(da.translate(W.left,W.top),'left'===Y.tooltipXAlign?da.translate(Y.tooltipXMargin,0):'right'===Y.tooltipXAlign&&da.translate(Xa-ib-Y.tooltipCandleThick-Y.tooltipXMargin,0),'top'===Y.tooltipYAlign?da.translate(0,Y.tooltipYMargin):'bottom'===Y.tooltipYAlign&&da.translate(0,Ya-hb-Y.tooltipYMargin),Wa){var _layers$mainCandle=S[Wa],jb=_layers$mainCandle.data,kb=_layers$mainCandle.style;if(jb[Ra]){var _data$index=jb[Ra],lb=_data$index.open,mb=_data$index.close;da.fillStyle=lb<mb?kb.incrementItemColor:kb.decrementItemColor,da.fillRect(0,0,Y.tooltipCandleThick,hb),da.translate(Y.tooltipCandleThick,0)}}Wa||'right'!==Y.tooltipXAlign||da.translate(Y.tooltipCandleThick,0),da.fillStyle=Y.tooltipBackgroundColor,da.fillRect(0,0,ib,hb),da.translate(fb/2,1.2),db(),da.restore(),Fa=Ra}}}(),Ia=function(){for(var Qa in k.layerStyle)P[Qa]=C(O.layerStyle[Qa],k.layerStyle[Qa])},Ja=function(){M.style.backgroundColor=Y.backgroundColor},Ka=function(Qa){for(var Ra in O=m[Qa],Y=C(O.globalStyle,Y),Ja(),Ia(),S){var Sa=S[Ra];fa(Ra,{style:P[Sa.type]})}pa(),sa(),ta()},La=function(){Q.map(function(Qa){Qa.width=M.clientWidth,Qa.height=M.clientHeight}),va()},Ma=[],Na=function(Qa){return!0==Qa instanceof K?null===ja.$rootConnect?void(H(Qa.$key,'getTimeline',I(N,'getTimeline')),Ma.push(Qa.$key),Qa.$rootConnect=N,va(),Qa.render()):void G[ja.$rootConnect].connect(Qa):void 0},Oa=function(){!0===Pa()?(Ma.map(function(Qa){return G[Qa].disconnect()}),Ma.splice(0,Ma.length)):G[N].disconnect(),va()};H(N,'getTimeline',function(){return U}),H(N,'_setViewport',ha),H(N,'dispatchSetViewport',function(Qa,Ra){0<ja.$connect.length&&Ma.map(function(Sa){G[Sa]._setViewport(Qa,Ra)})}),H(N,'_focusIndex',za),H(N,'dispatchFocusIndex',function(Qa,Ra){0<ja.$connect.length&&Ma.map(function(Sa){G[Sa]._focusIndex(Qa,Ra)})}),H(N,'_unfocusIndex',Ba),H(N,'dispatchUnfocusIndex',function(Qa,Ra){0<ja.$connect.length&&Ma.map(function(Sa){G[Sa]._unfocusIndex(Qa,Ra)})}),H(N,'_setTimeline',function(){V=I(N,'getTimeline')(),va()}),H(N,'dispatchSetTimeline',function(){0<ja.$connect.length&&Ma.map(function(Sa){G[Sa]._setTimeline()})}),H(N,'connect',function(){return Na}),H(N,'disconnect',function(){H(N,'getTimeline',function(){return U}),ja.$rootConnect=null,va()}),H(N,'$On',function(Qa){'getTimeline'===Qa&&(V=I(N,'getTimeline')())}),this.$key=N,this.$connect=Ma,this.$rootConnect=null;var Pa=function(){return null===ja.$rootConnect};this.addLayer=function(){for(var Ra=arguments.length,Qa=Array(Ra),Sa=0;Sa<Ra;Sa++)Qa[Sa]=arguments[Sa];return ea.apply(ja,Qa),ja},this.setLayer=function(){for(var Ra=arguments.length,Qa=Array(Ra),Sa=0;Sa<Ra;Sa++)Qa[Sa]=arguments[Sa];return fa.apply(ja,Qa),ja},this.setViewport=function(){for(var Ra=arguments.length,Qa=Array(Ra),Sa=0;Sa<Ra;Sa++)Qa[Sa]=arguments[Sa];return ia.apply(ja,Qa),ja},this.getViewport=function(){for(var Ra=arguments.length,Qa=Array(Ra),Sa=0;Sa<Ra;Sa++)Qa[Sa]=arguments[Sa];return ka.apply(ja,Qa),ja},this.setTimeline=function(){for(var Ra=arguments.length,Qa=Array(Ra),Sa=0;Sa<Ra;Sa++)Qa[Sa]=arguments[Sa];return la.apply(ja,Qa),ja},this.setPadding=function(){for(var Ra=arguments.length,Qa=Array(Ra),Sa=0;Sa<Ra;Sa++)Qa[Sa]=arguments[Sa];return na.apply(ja,Qa),ja},this.setStyle=function(){for(var Ra=arguments.length,Qa=Array(Ra),Sa=0;Sa<Ra;Sa++)Qa[Sa]=arguments[Sa];return oa.apply(ja,Qa),ja},this.setTheme=function(){for(var Ra=arguments.length,Qa=Array(Ra),Sa=0;Sa<Ra;Sa++)Qa[Sa]=arguments[Sa];return Ka.apply(ja,Qa),ja},this.resize=function(){for(var Ra=arguments.length,Qa=Array(Ra),Sa=0;Sa<Ra;Sa++)Qa[Sa]=arguments[Sa];return La.apply(ja,Qa),ja},this.setDateFormatter=function(){for(var Ra=arguments.length,Qa=Array(Ra),Sa=0;Sa<Ra;Sa++)Qa[Sa]=arguments[Sa];return ma.apply(ja,Qa),ja},this.setTooltip=function(){for(var Ra=arguments.length,Qa=Array(Ra),Sa=0;Sa<Ra;Sa++)Qa[Sa]=arguments[Sa];return Ea.apply(ja,Qa),ja},this.connect=function(){for(var Ra=arguments.length,Qa=Array(Ra),Sa=0;Sa<Ra;Sa++)Qa[Sa]=arguments[Sa];return Na.apply(ja,Qa),ja},this.disconnect=function(){for(var Ra=arguments.length,Qa=Array(Ra),Sa=0;Sa<Ra;Sa++)Qa[Sa]=arguments[Sa];return Oa.apply(ja,Qa),ja},this.render=function(){return va(),ja},this.onSelect=function(){},pa(),Ka('white')}};return J.themes=m,J.getTheme=function(K){return m[K]},J.addTheme=function(K,L){return m[K]=L},J.calculateMA=function(K,L){for(var M=[],N=[],O=0,P=0,Q=L.length;P<Q;P++)M[P]=null,N.push(L[P]),O+=L[P],N.length===K&&(M[P]=O/K,O-=N.shift());return M},J.toPrice=function(K,L){if(isNaN(K))return'N/A';!0!==L&&(K=Math.floor(K));var M=K.toString().split('.'),N=M[0].replace(/\B(?=(\d{3})+(?!\d))/g,',');return void 0===M[1]?N:N+'.'+M[1]},J}();
